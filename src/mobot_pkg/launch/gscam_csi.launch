<launch>
  <arg name="sensor_id" default="0" />                      
  <arg name="cam_name" default="camera_$(arg sensor_id)" />
  <arg name="frame_id" default="$(arg cam_name)_link" />   
  <arg name="sync_sink" default="true" />                   
  <arg name="width" default="640" />                        
  <arg name="height" default="480" />                       
  <arg name="fps" default="5" />                           
  <arg name="flip_method" default="0" />                   

  <param name="$(arg cam_name)/camera_id" type="int" value="$(arg sensor_id)" />
  <param name="$(arg cam_name)/image_width" type="int" value="$(arg width)" />
  <param name="$(arg cam_name)/image_height" type="int" value="$(arg height)" />
  <param name="$(arg cam_name)/target_fps" type="int" value="$(arg fps)" />
  <arg name="PUBLISH_FRAME" default="true"/>
  <env name="GSCAM_CONFIG" value="nvarguscamerasrc sensor-id=$(arg sensor_id) ! video/x-raw(memory:NVMM), width=(int)$(arg width), height=(int)$(arg height), framerate=(fraction)$(arg fps)/1 ! nvvidconv flip-method=$(arg flip_method) ! video/x-raw, format=(string)BGRx ! videoconvert" />

  <node pkg="gscam" type="gscam" name="$(arg cam_name)">
    <param name="camera_name" value="$(arg cam_name)" />
    <param name="frame_id" value="$(arg frame_id)" />
    <param name="sync_sink" value="$(arg sync_sink)" />
    <param name="camera_info_url" value="$(find mobot_pkg)/config/$(arg cam_name).yaml" />

    <!-- <remap from="camera/image_raw" to="/image" /> -->
    <!-- <remap from="/set_camera_info" to="$(arg cam_name)/set_camera_info" /> -->
    <!-- <remap from="$(arg cam_name)/image_raw/compressed" to="/camera/compressed" /> -->
    <!-- <remap from="/camera/camera_info" to="/camera_info" /> -->
  </node>
  <!-- <node if="$(arg PUBLISH_FRAME)" name="camera_transform" pkg="tf" type="static_transform_publisher" args=".129 0 .069  0 0 0  /camera_0_link /camera_0_link_0 100"/> -->
  <!-- <node if="$(arg PUBLISH_FRAME)" name="camera_transform_0" pkg="tf" type="static_transform_publisher" args=" 0 0 0 0 -1.5708 0 /camera_0_link_0 /base_link 100"/>
  <node if="$(arg PUBLISH_FRAME)" name="camera_transform" pkg="tf" type="static_transform_publisher" args=".069 0 -.129 0 0 0  /camera_0_link /camera_0_link_0 100"/> -->

</launch>


<!-- " gst-launch-1.0 nvarguscamerasrc sensor_id=0 !   'video/x-raw(memory:NVMM),width=1920, height=1080, framerate=21/1, format=NV12' !    nvvidconv flip-method=2 ! 'video/x-raw, width=1280, height=720' ! nvvidconv ! nvegltransform ! nveglglessink -e "  -->





